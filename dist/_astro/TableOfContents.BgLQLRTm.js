import{c as f,j as e}from"./createLucideIcon.BKzGyjih.js";import{r as m}from"./index.DK-fsZOb.js";import{C as g}from"./chevron-right.CxhKyucN.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=f("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),b=l=>{const i=[],s=[];return l.forEach(t=>{const n={heading:t,children:[]};for(;s.length>0&&s[s.length-1].heading.depth>=t.depth;)s.pop();s.length===0?i.push(n):s[s.length-1].children.push(n),s.push(n)}),i},p=({item:l,activeId:i,onClick:s,level:t})=>{const[n,d]=m.useState(t<2),h=l.children.length>0,a=i===l.heading.slug,r=c=>{const x=["font-medium text-sm","text-sm","text-xs","text-xs opacity-90","text-xs opacity-80","text-xs opacity-70"];return x[c]||x[x.length-1]},o=c=>({paddingLeft:`${8+c*16}px`,position:"relative"});return e.jsxs("div",{className:"w-full group",children:[e.jsxs("div",{className:"flex items-center relative",children:[t>0&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-px bg-stone-200 dark:bg-stone-700",style:{left:`${8+(t-1)*16}px`}}),h&&e.jsx("button",{onClick:()=>d(!n),className:"flex-shrink-0 w-5 h-5 flex items-center justify-center text-stone-400 hover:text-stone-600 dark:hover:text-stone-300 transition-colors rounded hover:bg-stone-100 dark:hover:bg-stone-800",style:{marginLeft:`${8+t*16}px`},children:e.jsx(g,{className:`w-3 h-3 transition-transform ${n?"rotate-90":""}`})}),e.jsx("button",{onClick:()=>s(l.heading.slug),className:`flex-1 text-left py-1.5 px-2 rounded transition-all duration-150 truncate
            ${r(t)}
            ${a?"text-teal-700 dark:text-teal-400 font-semibold bg-teal-50 dark:bg-teal-900/20 border-l-2 border-teal-600 dark:border-teal-400":"text-stone-700 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-stone-800/50 hover:text-stone-900 dark:hover:text-stone-100"}`,style:o(t),children:e.jsxs("span",{className:"truncate block leading-relaxed",children:[t===0&&e.jsx("span",{className:"mr-1",children:"ðŸ“„"}),t===1&&e.jsx("span",{className:"mr-1 text-xs",children:"â–¸"}),t>=2&&e.jsx("span",{className:"mr-1 text-xs",children:"â€¢"}),l.heading.text]})})]}),h&&n&&e.jsx("div",{className:"relative",children:l.children.map(c=>e.jsx(p,{item:c,activeId:i,onClick:s,level:t+1},c.heading.slug))})]})},w=({headings:l,lang:i})=>{const[s,t]=m.useState(""),n=m.useRef(null),d=b(l.filter(a=>a.depth>=2&&a.depth<=6)),h=a=>{const r=document.getElementById(a);if(r){const x=r.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:x,behavior:"smooth"})}};return m.useEffect(()=>(n.current=new IntersectionObserver(r=>{r.forEach(o=>{o.isIntersecting&&t(o.target.id)})},{rootMargin:"-80px 0px -60% 0px",threshold:.1}),d.flatMap(r=>[r,...r.children.flatMap(o=>[o,...o.children])]).forEach(r=>{const o=document.getElementById(r.heading.slug);o&&n.current?.observe(o)}),()=>{n.current?.disconnect()}),[d]),d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:"æš‚æ— ç›®å½•"})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"px-4 py-3 border-b border-stone-200 dark:border-stone-700",children:e.jsxs("h3",{className:"text-sm font-semibold text-stone-900 dark:text-stone-100 flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2 text-teal-600 dark:text-teal-400"}),"æ–‡ç« ç›®å½•"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:e.jsx("nav",{className:"w-full px-2",children:d.map(a=>e.jsx(p,{item:a,activeId:s,onClick:h,level:0},a.heading.slug))})}),e.jsx("div",{className:"px-4 py-2 border-t border-stone-200 dark:border-stone-700",children:e.jsx("div",{className:"text-xs text-stone-500 dark:text-stone-400 text-center",children:"ðŸ“– æ–‡æ¡£å¯¼èˆª"})})]})};export{w as default};
