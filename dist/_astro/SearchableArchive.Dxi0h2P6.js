import{c as i,j as e}from"./createLucideIcon.BKzGyjih.js";import{r as l}from"./index.DK-fsZOb.js";import{u as _,m as C}from"./utils.9b3zlvXO.js";import{L as z,C as I,a as R,B as q}from"./layers.gRb9XqxV.js";import{C as P}from"./chevron-right.CxhKyucN.js";import{A as M}from"./index.Bly-A_NM.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=i("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=i("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=i("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=i("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=i("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=i("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=i("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=i("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),k=8;function Y({posts:y,lang:f}){const[d,L]=l.useState(""),[n,b]=l.useState("all"),[c,j]=l.useState("newest"),[w,N]=l.useState([]),[x,g]=l.useState(1),a=_(f);l.useEffect(()=>{g(1)},[d,n,c]);const m=l.useMemo(()=>[{id:"all",label:a("cat.all"),icon:z,isParent:!1},{id:"group_eng",label:a("cat.group.eng"),icon:v,isParent:!0,children:[{id:"dev",label:a("cat.dev"),icon:I},{id:"cloud",label:a("cat.cloud"),icon:R}]},{id:"group_ai",label:a("cat.group.ai"),icon:v,isParent:!0,children:[{id:"ai",label:a("cat.ai"),icon:q}]},{id:"group_life",label:a("cat.group.life"),icon:v,isParent:!0,children:[{id:"misc",label:a("cat.misc"),icon:D}]}],[f]),A=(t,s)=>{s?.stopPropagation(),N(o=>o.includes(t)?o.filter(r=>r!==t):[...o,t])},E=t=>{b(t),w.includes(t)||N(s=>[...s,t])},$=t=>{const s=t.tags.join(" ").toLowerCase();return s.includes("架构")||s.includes("cloud")?"cloud":s.includes("前端")||s.includes("dev")?"dev":s.includes("ai")||s.includes("llm")?"ai":"misc"},p=l.useMemo(()=>y.filter(t=>{if(!(t.title.toLowerCase().includes(d.toLowerCase())||t.tags.some(h=>h.toLowerCase().includes(d.toLowerCase()))))return!1;if(n==="all")return!0;const o=$(t);if(o===n)return!0;const r=m.find(h=>h.id===n);return r&&r.children?r.children.some(h=>h.id===o):!1}).sort((t,s)=>c==="newest"?new Date(s.date).valueOf()-new Date(t.date).valueOf():s.description.length-t.description.length),[y,d,n,c,m]),u=Math.ceil(p.length/k),O=p.slice((x-1)*k,x*k),G=()=>{for(const t of m){if(t.id===n)return t.label;if(t.children){const s=t.children.find(o=>o.id===n);if(s)return s.label}}return a("cat.all")};return e.jsxs("div",{className:"flex flex-col md:flex-row h-screen w-full bg-stone-50 dark:bg-stone-950 overflow-hidden pt-16 md:pt-20",children:[e.jsxs("aside",{className:"w-full md:w-72 lg:w-80 flex-shrink-0 flex flex-col border-b md:border-b-0 md:border-r border-stone-200 dark:border-stone-800 bg-white/50 dark:bg-stone-900/50 backdrop-blur-sm z-20",children:[e.jsxs("div",{className:"p-4 md:p-6 pb-2 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h2",{className:"text-lg font-extrabold text-stone-900 dark:text-white tracking-tight",children:a("archives.title")}),e.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded-md bg-stone-200 dark:bg-stone-800 text-stone-600 dark:text-stone-400",children:p.length})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-stone-400 group-focus-within:text-teal-500 transition-colors"}),e.jsx("input",{type:"text",className:"w-full pl-9 pr-4 py-2.5 bg-white dark:bg-stone-950 border border-stone-200 dark:border-stone-800 rounded-xl text-sm font-medium text-stone-900 dark:text-stone-100 placeholder-stone-400 focus:outline-none focus:ring-2 focus:ring-teal-500/50 focus:border-teal-500 transition-all shadow-sm",placeholder:a("search.placeholder"),value:d,onChange:t=>L(t.target.value)})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto md:overflow-x-hidden md:overflow-y-auto px-3 py-2 scrollbar-hide",children:e.jsx("div",{className:"flex md:flex-col gap-1 min-w-max md:min-w-0",children:m.map(t=>{const s=w.includes(t.id),o=n===t.id;return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("button",{onClick:()=>t.isParent?E(t.id):b(t.id),className:`flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm font-bold transition-all w-full text-left group relative ${o?"bg-teal-50 dark:bg-teal-500/10 text-teal-700 dark:text-teal-300":"text-stone-600 dark:text-stone-400 hover:bg-stone-100 dark:hover:bg-stone-800"}`,children:[e.jsx(t.icon,{className:`w-4 h-4 ${o?"text-teal-600 dark:text-teal-400":"opacity-70 group-hover:text-stone-900 dark:group-hover:text-stone-200"}`}),e.jsx("span",{className:"flex-1",children:t.label}),t.isParent&&e.jsx("div",{role:"button",onClick:r=>A(t.id,r),className:"p-1 rounded-md hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors",children:e.jsx(P,{className:`w-3.5 h-3.5 transition-transform duration-200 ${s?"rotate-90":""}`})})]}),e.jsx(M,{children:t.isParent&&s&&t.children&&e.jsx(C.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:e.jsx("div",{className:"ml-4 pl-3 border-l border-stone-200 dark:border-stone-800 space-y-1 my-1",children:t.children.map(r=>e.jsxs("button",{onClick:()=>b(r.id),className:`flex items-center gap-2.5 px-3 py-2 rounded-lg text-xs font-medium transition-all w-full text-left ${n===r.id?"bg-stone-100 dark:bg-stone-800 text-teal-600 dark:text-teal-400":"text-stone-500 dark:text-stone-500 hover:text-stone-900 dark:hover:text-stone-300 hover:bg-stone-50 dark:hover:bg-stone-800/50"}`,children:[e.jsx(r.icon,{className:"w-3.5 h-3.5 opacity-70"}),r.label]},r.id))})})})]},t.id)})})}),e.jsx("div",{className:"p-4 border-t border-stone-200 dark:border-stone-800 text-center",children:e.jsx("p",{className:"text-xs text-stone-400 font-medium",children:a("footer.copyright")})})]}),e.jsx("main",{className:"flex-1 h-full overflow-y-auto relative scroll-smooth bg-stone-50/30 dark:bg-[#0c0a09]",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-8 lg:p-10 min-h-full flex flex-col",children:[e.jsxs("header",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsx("h1",{className:"text-xl font-bold text-stone-900 dark:text-white",children:G()}),e.jsxs("span",{className:"text-xs text-stone-400 hidden sm:inline-block",children:["/ ",a("archives.subtitle")]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>j("newest"),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-bold transition-all ${c==="newest"?"bg-stone-200 dark:bg-stone-800 text-teal-700 dark:text-teal-400":"text-stone-500 hover:text-stone-700 dark:text-stone-400 hover:bg-stone-100 dark:hover:bg-stone-800"}`,children:[e.jsx(B,{className:"w-3 h-3"})," ",e.jsx("span",{className:"hidden sm:inline",children:a("filter.newest")})]}),e.jsxs("button",{onClick:()=>j("popular"),className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-bold transition-all ${c==="popular"?"bg-stone-200 dark:bg-stone-800 text-teal-700 dark:text-teal-400":"text-stone-500 hover:text-stone-700 dark:text-stone-400 hover:bg-stone-100 dark:hover:bg-stone-800"}`,children:[e.jsx(U,{className:"w-3 h-3"})," ",e.jsx("span",{className:"hidden sm:inline",children:a("filter.popular")})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:e.jsx(M,{mode:"popLayout",children:O.map((t,s)=>e.jsxs(C.a,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.2,delay:s*.05},href:f==="zh"?`/posts/${t.slug}`:`/en/posts/${t.slug}`,className:"group relative flex flex-col p-5 bg-white dark:bg-[#1c1917] border border-stone-200 dark:border-stone-800 rounded-2xl hover:border-teal-500/40 dark:hover:border-teal-500/40 hover:shadow-lg hover:shadow-teal-500/5 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded bg-stone-100 dark:bg-stone-800 text-stone-500 dark:text-stone-400 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors",children:t.tags[0]}),e.jsxs("span",{className:"text-xs font-medium text-stone-400 flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"})," ",t.date]})]}),e.jsx(F,{className:"w-4 h-4 text-stone-300 group-hover:text-teal-500 transition-colors"})]}),e.jsx("h3",{className:"text-base font-bold text-stone-900 dark:text-stone-100 mb-2 line-clamp-1 group-hover:text-teal-600 dark:group-hover:text-teal-400 transition-colors",children:t.title}),e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 line-clamp-2 leading-relaxed",children:t.description})]},t.slug))})}),p.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-stone-400",children:[e.jsx(S,{className:"w-12 h-12 mb-4 opacity-20"}),e.jsx("p",{children:a("search.no_results")})]})]}),u>1&&e.jsxs("div",{className:"flex items-center justify-center gap-4 py-8 mt-4 border-t border-stone-200 dark:border-stone-800/50",children:[e.jsxs("button",{onClick:()=>g(t=>Math.max(1,t-1)),disabled:x===1,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-white dark:bg-stone-900 border border-stone-200 dark:border-stone-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors",children:[e.jsx(T,{className:"w-4 h-4"})," ",a("pagination.prev")]}),e.jsx("span",{className:"text-xs font-medium text-stone-500",children:a("pagination.info").replace("{current}",x.toString()).replace("{total}",u.toString())}),e.jsxs("button",{onClick:()=>g(t=>Math.min(u,t+1)),disabled:x===u,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-white dark:bg-stone-900 border border-stone-200 dark:border-stone-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-stone-50 dark:hover:bg-stone-800 transition-colors",children:[a("pagination.next")," ",e.jsx(P,{className:"w-4 h-4"})]})]})]})})]})}export{Y as default};
